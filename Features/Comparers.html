<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Comparers | rlist Tutorial</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="../Features/Input-output.html" />
    
    
    <link rel="prev" href="../Features/Searching.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">

    
    <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-katex/katex.min.css">
    


        
    <div class="book" data-level="2.8" data-basepath=".." data-revision="1422058303624">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="Getting-started/README.html">
            
                
                    <a href="../Getting-started/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Getting started
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="Getting-started/Quick-overview.html">
            
                
                    <a href="../Getting-started/Quick-overview.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         Quick overview
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="Getting-started/Working-in-pipeline.html">
            
                
                    <a href="../Getting-started/Working-in-pipeline.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         Working in pipeline
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="Getting-started/File-formats.html">
            
                
                    <a href="../Getting-started/File-formats.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         File formats
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="Features/README.html">
            
                
                    <a href="../Features/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Features
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="Features/Mapping.html">
            
                
                    <a href="../Features/Mapping.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Mapping
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="Features/Filtering.html">
            
                
                    <a href="../Features/Filtering.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Filtering
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="Features/Updating.html">
            
                
                    <a href="../Features/Updating.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         Updating
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="Features/Sorting.html">
            
                
                    <a href="../Features/Sorting.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         Sorting
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="Features/Grouping.html">
            
                
                    <a href="../Features/Grouping.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         Grouping
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6" data-path="Features/Joining.html">
            
                
                    <a href="../Features/Joining.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                         Joining
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.7" data-path="Features/Searching.html">
            
                
                    <a href="../Features/Searching.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                         Searching
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="2.8" data-path="Features/Comparers.html">
            
                
                    <a href="../Features/Comparers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                         Comparers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.9" data-path="Features/Input-output.html">
            
                
                    <a href="../Features/Input-output.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                         Input/Output
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.10" data-path="Features/Misc-functions.html">
            
                
                    <a href="../Features/Misc-functions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                         Misc functions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.11" data-path="Features/Lambda-expression.html">
            
                
                    <a href="../Features/Lambda-expression.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.11.</b>
                        
                         Lambda expression
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.12" data-path="Features/List-environment.html">
            
                
                    <a href="../Features/List-environment.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.12.</b>
                        
                         List environment
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="Examples/README.html">
            
                
                    <a href="../Examples/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Examples
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="Examples/GitHub-API.html">
            
                
                    <a href="../Examples/GitHub-API.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         GitHub API
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="Examples/Weather-API.html">
            
                
                    <a href="../Examples/Weather-API.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         Weather API
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >rlist Tutorial</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_6">
                    
                        <h1 id="comparers">Comparers</h1>
<p><code>list.filter()</code> and <code>list.search()</code> are two major functions to find values that meet certain conditions. The condition is most likely to be a comparison, which can be done by exact comparing, atomic comparing, pattern matching by regular expression, string distance comparing, and so on.</p>
<p>In this page, we will introduce the usage of these comparers with filtering and searching functions and you will know more about how to perform logical and fuzzy data selection.</p>
<pre><code class="lang-r"><span class="hljs-keyword">library</span>(rlist)
<span class="hljs-keyword">library</span>(pipeR)
people &lt;- list.load(<span class="hljs-string">&quot;http://renkun.me/rlist-tutorial/data/sample.json&quot;</span>)
friends &lt;- list.load(<span class="hljs-string">&quot;http://renkun.me/rlist-tutorial/data/friends.json&quot;</span>)
</code></pre>
<h2 id="precise-comparers">Precise comparers</h2>
<p>Precise comparers include functions that compare the source value and target value precisely and see whether they are equal. The target value represents a certain value.</p>
<h3 id="exact-comparer">Exact comparer</h3>
<p>Exact comparing can be done with <code>identical()</code> which is built-in function that tells if two objects are exactly the same in terms of type, value, and attributes.</p>
<blockquote>
<p>NOTE: <code>identical()</code> is perhaps the strictest comparer that returns <code>FALSE</code> if any difference is spotted.</p>
</blockquote>
<p>Two vectors that have equal values may not be identical: they may not have the same type or the same attributes. For example, two vectors having equal values</p>
<pre><code class="lang-r">c(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>) == <span class="hljs-number">1</span>:<span class="hljs-number">3</span>
</code></pre>
<pre><code># [1] TRUE TRUE TRUE
</code></pre><p>may not be identical.</p>
<pre><code class="lang-r">identical(c(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>), <span class="hljs-number">1</span>:<span class="hljs-number">3</span>)
</code></pre>
<pre><code># [1] FALSE
</code></pre><p>This happens because <code>c(1,2,3)</code> is a numeric vector while <code>1:3</code> produces an integer vector. <code>==</code> first coerce the integer vector to numeric vector and then compare the values but <code>identical()</code> will directly check if they are exactly the same.</p>
<p>In addition, the names of the vector make a difference too. Even if the values are exactly the same, a difference in names will also fails the check in <code>identical()</code>.</p>
<pre><code class="lang-r">c(a=<span class="hljs-number">1</span>,b=<span class="hljs-number">2</span>,c=<span class="hljs-number">3</span>) == c(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)
</code></pre>
<pre><code>#    a    b    c 
# TRUE TRUE TRUE
</code></pre><pre><code class="lang-r">identical(c(a=<span class="hljs-number">1</span>,b=<span class="hljs-number">2</span>,c=<span class="hljs-number">3</span>), c(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>))
</code></pre>
<pre><code># [1] FALSE
</code></pre><p>This happens because the names is in fact one of the common attributes of a vector object, which is in the checklist of <code>identical()</code>.</p>
<p>Having known the difference between exact comparing (<code>identical()</code>) and value comparing (<code>==</code>), we filter the people by whether their <code>Name</code> is exactly identical to <em>Ken</em>.</p>
<pre><code class="lang-r">people %&gt;&gt;%
  list.filter(identical(Name, <span class="hljs-string">&quot;Ken&quot;</span>)) %&gt;&gt;%
  str
</code></pre>
<pre><code># List of 1
#  $ :List of 4
#   ..$ Name     : chr &quot;Ken&quot;
#   ..$ Age      : int 24
#   ..$ Interests: chr [1:3] &quot;reading&quot; &quot;music&quot; &quot;movies&quot;
#   ..$ Expertise:List of 3
#   .. ..$ R     : int 2
#   .. ..$ CSharp: int 4
#   .. ..$ Python: int 3
</code></pre><p>Only people whose <code>Name</code> is exactly the same with character vector <code>&quot;Ken&quot;</code> will be singled out.</p>
<p>We can also use it in searching. For example, search all vectors exactly identical to <code>&quot;Ken&quot;</code>.</p>
<pre><code class="lang-r">list.search(friends, identical(., <span class="hljs-string">&quot;Ken&quot;</span>))
</code></pre>
<pre><code># $Ken.Name
# [1] &quot;Ken&quot;
</code></pre><p>Only values that are identical to character vector <code>&quot;Ken&quot;</code> will be put in the resulting list. We can also unlist the result.</p>
<pre><code class="lang-r">list.search(friends, identical(., <span class="hljs-string">&quot;Ken&quot;</span>), unlist = <span class="hljs-literal">TRUE</span>)
</code></pre>
<pre><code># Ken.Name 
#    &quot;Ken&quot;
</code></pre><p>Then, we search all values identical to <code>c(&quot;Ken&quot;,&quot;Penny&quot;)</code>.</p>
<pre><code class="lang-r">list.search(friends, identical(., c(<span class="hljs-string">&quot;Ken&quot;</span>,<span class="hljs-string">&quot;Penny&quot;</span>)))
</code></pre>
<pre><code># $James.Friends
# [1] &quot;Ken&quot;   &quot;Penny&quot;
</code></pre><p>Next, we search values exactly identical to numeric value <code>24</code>.</p>
<pre><code class="lang-r">list.search(friends, identical(., <span class="hljs-number">24</span>))
</code></pre>
<pre><code># named list()
</code></pre><p>The result is none. If you are familiar with how function <code>identical()</code> works as we described, you should not feel surprised. If you take a look at the data,</p>
<pre><code class="lang-r">str(friends)
</code></pre>
<pre><code># List of 4
#  $ Ken  :List of 3
#   ..$ Name   : chr &quot;Ken&quot;
#   ..$ Age    : int 24
#   ..$ Friends: chr &quot;James&quot;
#  $ James:List of 3
#   ..$ Name   : chr &quot;James&quot;
#   ..$ Age    : int 25
#   ..$ Friends: chr [1:2] &quot;Ken&quot; &quot;Penny&quot;
#  $ Penny:List of 3
#   ..$ Name   : chr &quot;Penny&quot;
#   ..$ Age    : int 24
#   ..$ Friends: chr [1:2] &quot;James&quot; &quot;David&quot;
#  $ David:List of 3
#   ..$ Name   : chr &quot;David&quot;
#   ..$ Age    : int 25
#   ..$ Friends: chr &quot;Penny&quot;
</code></pre><p>you will find that the ages are all stored as integers rather than numerics. Therefore, searching exact integers will work.</p>
<pre><code class="lang-r">list.search(friends, identical(., <span class="hljs-number">24L</span>))
</code></pre>
<pre><code># $Ken.Age
# [1] 24
# 
# $Penny.Age
# [1] 24
</code></pre><h3 id="value-comparer">Value comparer</h3>
<p><code>==</code> compares two atomic vectors by value and returns a logical vector indicating whether each pair of value coerced to a common type equal to each other. This comparison mechanism allows for more flexibility and can be useful in a wide range of situations.</p>
<p>For example, we search all values at least include one of <code>&quot;Ken&quot;</code> and <code>&quot;Penny&quot;</code>.</p>
<pre><code class="lang-r">list.search(friends, any(c(<span class="hljs-string">&quot;Ken&quot;</span>,<span class="hljs-string">&quot;Penny&quot;</span>) %<span class="hljs-keyword">in</span>% .), unlist = <span class="hljs-literal">TRUE</span>)
</code></pre>
<pre><code>#       Ken.Name James.Friends1 James.Friends2     Penny.Name  David.Friends 
#          &quot;Ken&quot;          &quot;Ken&quot;        &quot;Penny&quot;        &quot;Penny&quot;        &quot;Penny&quot;
</code></pre><p>Similarly, we search all numeric and integer values equal to <code>24</code>.</p>
<pre><code class="lang-r">list.search(friends, . == <span class="hljs-number">24</span>, c(<span class="hljs-string">&quot;numeric&quot;</span>,<span class="hljs-string">&quot;integer&quot;</span>), unlist = <span class="hljs-literal">TRUE</span>)
</code></pre>
<pre><code>#   Ken.Age Penny.Age 
#        24        24
</code></pre><p>When the code above is being evaluated, all numeric vectors and integer vectors are evaluated by <code>. == 24</code> recursively in <code>friends</code> where <code>.</code> represents the vector.</p>
<h2 id="fuzzy-comparers">Fuzzy comparers</h2>
<p>Fuzzy comparers can be useful in a wide range of situations. In many cases, the filtering of data, mainly string data, is not clear-cut, that is, we don&apos;t know exactly the value or range to select. We will cover two main types of fuzzy comparers.</p>
<h3 id="regular-expression">Regular expression</h3>
<p>One type of fuzzy filtering device is string pattern. It uses meta-symbols to represent a range of possible strings. Then all values that match this pattern can be selected.</p>
<p>For example, if we need to find all companies in a list with a domain name that ends up with <code>.com</code> or <code>.org</code>, we can use regular expression to tell whether a string matches a specific pattern. </p>
<p>For <code>people</code> dataset, we can find out the names and ages of all those who have a name that includes <code>&quot;en&quot;</code> using <code>grepl()</code> which returns <code>TRUE</code> or <code>FALSE</code> indicating whether the string matches a given pattern.</p>
<pre><code class="lang-r">people %&gt;&gt;%
  list.filter(grepl(<span class="hljs-string">&quot;en&quot;</span>, Name)) %&gt;&gt;%
  list.select(Name, Age) %&gt;&gt;%
  list.stack
</code></pre>
<pre><code>#    Name Age
# 1   Ken  24
# 2 Penny  24
</code></pre><p>Regular expression is flexible enough to represent a wide range of string patterns. There are plentiful websites introducing regular expressions:</p>
<ol>
<li><a href="http://regexone.com/" target="_blank">RegexOne</a>: An interative tutorial</li>
<li><a href="http://www.regexr.com/" target="_blank">RegExr</a>: An online string pattern tester</li>
</ol>
<p>If you get to know more about it, it would certainly be rewarding in string-related data manipulation.</p>
<h3 id="string-distance">String distance</h3>
<p>The other type of fuzzy comparer is string distance measure. It is particularly useful if the quality of the data source is not high enough to only contain consistent texts. For example, if an object has a rich variants of names with very close spellings but slight differences or mis-spellings, a string-distance comparer can be useful.</p>
<p><a href="https://github.com/markvanderloo/stringdist" target="_blank">stringdist</a> is an R package that implements a rich collection of string distance measures. Basically, a string distance measure can tell you if two strings are close or not.</p>
<pre><code class="lang-r"><span class="hljs-keyword">library</span>(stringdist)
stringdist(<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-string">&quot;b&quot;</span>)
</code></pre>
<pre><code># [1] 1
</code></pre><p>The distance between <code>&quot;a&quot;</code> and <code>&quot;b&quot;</code> is 1 because, basically speaking, &quot;a&quot; can be transformed to &quot;b&quot; in no more than 1 elementary steps in terms of <a href="http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance" target="_blank">restricted Damerau-Levenshtein distance</a> which is the default string distance meausres chosen by <code>stringdist()</code> function.</p>
<pre><code class="lang-r">stringdist(<span class="hljs-string">&quot;helo&quot;</span>,<span class="hljs-string">&quot;hello&quot;</span>)
</code></pre>
<pre><code># [1] 1
</code></pre><p>The distance between <code>&quot;helo&quot;</code> and <code>&quot;hello&quot;</code> is also 1 because one only needs to add a letter to transform the first string to the second, or vice versa. The string distance measure largely tolerates minor mis-spellings or slight variants between strings.</p>
<p>If you prefer other distance measure, you can specify <code>method=</code> argument. All possible values are listed in the documentation of <code>stringdist</code> package.</p>
<pre><code class="lang-r">stringdist(<span class="hljs-string">&quot;hao&quot;</span>,<span class="hljs-string">&quot;hello&quot;</span>,method = <span class="hljs-string">&quot;dl&quot;</span>)
</code></pre>
<pre><code># [1] 3
</code></pre><p>The string distance functions work with filtering functions in rlist. Consider the following data.</p>
<pre><code class="lang-r">people1 &lt;- list(
    p1 = list(name=<span class="hljs-string">&quot;Ken&quot;</span>,age=<span class="hljs-number">24</span>),
    p2 = list(name=<span class="hljs-string">&quot;Kent&quot;</span>,age=<span class="hljs-number">26</span>),
    p3 = list(name=<span class="hljs-string">&quot;Sam&quot;</span>,age=<span class="hljs-number">24</span>),
    p4 = list(name=<span class="hljs-string">&quot;Keynes&quot;</span>,age=<span class="hljs-number">30</span>),
    p5 = list(name=<span class="hljs-string">&quot;Kwen&quot;</span>,age=<span class="hljs-number">31</span>))
</code></pre>
<p>We can use <code>stringdist()</code> in <code>stringdist</code> with <code>list.filter()</code>. For example, find all list elements whose <code>name</code> is like <code>&quot;Ken&quot;</code> with maximum distance 1, and output their pasted names as a named character vector.</p>
<pre><code class="lang-r">people1 %&gt;&gt;%
  list.filter(stringdist(name,<span class="hljs-string">&quot;Ken&quot;</span>) &lt;= <span class="hljs-number">1</span>) %&gt;&gt;%
  list.mapv(name)
</code></pre>
<pre><code>#     p1     p2     p5 
#  &quot;Ken&quot; &quot;Kent&quot; &quot;Kwen&quot;
</code></pre><p>Consider the following list.</p>
<pre><code class="lang-r">people2 &lt;- list(
    p1 = list(name=c(<span class="hljs-string">&quot;Ken&quot;</span>, <span class="hljs-string">&quot;Ren&quot;</span>),age=<span class="hljs-number">24</span>),
    p2 = list(name=c(<span class="hljs-string">&quot;Kent&quot;</span>, <span class="hljs-string">&quot;Potter&quot;</span>),age=<span class="hljs-number">26</span>),
    p3 = list(name=c(<span class="hljs-string">&quot;Sam&quot;</span>, <span class="hljs-string">&quot;Lee&quot;</span>),age=<span class="hljs-number">24</span>),
    p4 = list(name=c(<span class="hljs-string">&quot;Keynes&quot;</span>, <span class="hljs-string">&quot;Bond&quot;</span>),age=<span class="hljs-number">30</span>),
    p5 = list(name=c(<span class="hljs-string">&quot;Kwen&quot;</span>, <span class="hljs-string">&quot;Hu&quot;</span>),age=<span class="hljs-number">31</span>))
</code></pre>
<p>If we want to find out names either is similar with <code>&quot;ken&quot;</code> with maximum distance 2, we can run</p>
<pre><code class="lang-r">people2 %&gt;&gt;%
  list.search(any(stringdist(., <span class="hljs-string">&quot;ken&quot;</span>) &lt;= <span class="hljs-number">2</span>), <span class="hljs-string">&quot;character&quot;</span>) %&gt;&gt;%
  str
</code></pre>
<pre><code># List of 4
#  $ p1.name: chr [1:2] &quot;Ken&quot; &quot;Ren&quot;
#  $ p2.name: chr [1:2] &quot;Kent&quot; &quot;Potter&quot;
#  $ p3.name: chr [1:2] &quot;Sam&quot; &quot;Lee&quot;
#  $ p5.name: chr [1:2] &quot;Kwen&quot; &quot;Hu&quot;
</code></pre><p>We can also search the terms in the character vectors like <code>&quot;Ken&quot;</code> with distance 1 and single out the values alike.</p>
<pre><code class="lang-r">people2 %&gt;&gt;%
  list.search(.[stringdist(., <span class="hljs-string">&quot;Ken&quot;</span>) &lt;= <span class="hljs-number">1</span>], <span class="hljs-string">&quot;character&quot;</span>) %&gt;&gt;%
  str
</code></pre>
<pre><code># List of 3
#  $ p1.name: chr [1:2] &quot;Ken&quot; &quot;Ren&quot;
#  $ p2.name: chr &quot;Kent&quot;
#  $ p5.name: chr &quot;Kwen&quot;
</code></pre><p><code>stringdist</code> even provides a Soundex-based string distance measure. We can use use it to find texts that sounds alike. For example, we can find out all people whose first name or last name sounds like Li.</p>
<pre><code class="lang-r">people2 %&gt;&gt;%
  list.filter(any(stringdist(name, <span class="hljs-string">&quot;Li&quot;</span>, method = <span class="hljs-string">&quot;soundex&quot;</span>) == <span class="hljs-number">0</span>)) %&gt;&gt;%
  list.mapv(name %&gt;&gt;% paste0(collapse = <span class="hljs-string">&quot; &quot;</span>))
</code></pre>
<pre><code>#        p3 
# &quot;Sam Lee&quot;
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Features/Searching.html" class="navigation navigation-prev " aria-label="Previous page: Searching"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Features/Input-output.html" class="navigation navigation-next " aria-label="Next page: Input/Output"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"ga":{"token":"UA-47159422-1","configuration":"auto"},"disqus":{"shortName":"renkun-ken"}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-47159422-1', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
